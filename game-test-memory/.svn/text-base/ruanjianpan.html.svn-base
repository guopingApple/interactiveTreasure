<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
		<meta name="format-detection" content="telephone=no" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black" />
		<meta content="yes" name=" apple-mobile-web-app-capable" />
		<meta name="description" content="">
		<meta http-equiv="pragma" content="no-cache" />
		<title>安卓软键盘</title>
		<style>
			div{ margin-bottom: 20px; border: 1px solid #225566;}
		</style>
	</head>
	<body>
<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.4.2.min.js"></script>
<p>我是来解决bug</p>
<p>我是来解决bug</p>
<p>我是来解决bug</p>
<p>我是来解决bug</p>
<p>我是来解决bug</p>
<p>我是来解决bug</p>
<p>我是来解决bug</p>
<p>我是来解决bug</p>
<p>我是来解决bug</p>
<p>我是来解决bug</p>
<input type="text" id="txt2" class="txtInput"  />
<p>我是来解决bug</p>
<p>我是来解决bug</p>
<p>我是来解决bug</p>
<p>我是来解决bug</p>
<p>我是来解决bug</p>
<p>我是来解决bug</p>
<p>我是来解决bug</p>
<p>我是来解决bug</p>
<p>我是来解决bug</p>
<p>我是来解决bug</p>
<input type="text" class="txtInput" />
<p>我是来解决bug</p>
<p>我是来解决bug</p>
<p>我是来解决bug</p>
<p>我是来解决bug</p>
<p>我是来解决bug</p>
<p>我是来解决bug</p>
<p>我是来解决bug</p>
<p>我是来解决bug</p>
<p>我是来解决bug</p>
<p>我是来解决bug</p>
<input type="text" class="txtInput" />
<p>我是来解决bug</p>
<p>我是来解决bug</p>
<p>我是来解决bug</p>
<p>我是来解决bug</p>
<p>我是来解决bug</p>
<p>我是来解决bug</p>
<p>我是来解决bug</p>
<p>我是来解决bug</p>
<p>我是来解决bug</p>
<p>我是来解决bug</p>
<div id="dv"></div>
<script>
   var timer, windowInnerHeight;
    function eventCheck(e) {
        if (e) { //blur,focus事件触发的
            $('#dv').html('android键盘' + (e.type == 'focus' ? '弹出' : '隐藏') + '--通过' + e.type + '事件');
            if (e.type == 'click') {
            	//如果是点击事件启动计时器监控是否点击了键盘上的隐藏键盘按钮，
            	//没有点击这个按钮的事件可用，keydown中也获取不到keyCode值
                setTimeout(function () {//由于键盘弹出是有动画效果的，要获取完全弹出的窗口高度，使用了计时器
                    windowInnerHeight = window.innerHeight;//获取弹出android软键盘后的窗口高度
                    timer = setInterval(function () { eventCheck() }, 100);
                }, 500);
            }
            else clearInterval(timer);
        }
        else { //计时器执行的，需要判断窗口可视高度，如果改变说明android键盘隐藏了,隐藏键盘触发
            if (window.innerHeight > windowInnerHeight) {
                clearInterval(timer);
                //$('#dv').html('android键盘隐藏--通过点击键盘隐藏按钮');
            }
        }
    }
    $('#txt').click(eventCheck).blur(eventCheck);
    $('.txtInput').focus(function(e){
    	var eTop=e.target.offsetTop;
    	$(document).scrollTop(eTop);
    	console.log(e.target.offsetTop+'win:'+window.scrollX)
    })
</script>
	</body>
</html>
